<div [formGroup]="formParent" class="mt-3 mb-3" id="parentForm">
  <p class="fs-5 mt-3">Informations parent {{ index }} {{ !requiredChange ? ' (facultatif)' : '' }}</p>
  <div class="row g-3">
    <div class="col-md-6 mb-3">
      <label for="nomParent">Nom <sup *ngIf="requiredChange">*</sup></label>
      <input
        type="text"
        formControlName="nom"
        class="form-control"
        id="nomParent"
        [class.is-invalid]="nom.invalid && (submitted$ | async)"
      />
      <div class="invalid-feedback" *ngIf="nom?.hasError && (submitted$ | async)">
        <ng-container *ngIf="nom?.hasError('required')"> Saisir un nom</ng-container>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <label for="prenomParent">Prénom<sup *ngIf="requiredChange">*</sup></label>
      <input
        type="text"
        formControlName="prenom"
        [class.is-invalid]="prenom.invalid && (submitted$ | async)"
        class="form-control"
        id="prenomParent"
      />
      <div class="invalid-feedback" *ngIf="prenom?.hasError && (submitted$ | async)">
        <ng-container *ngIf="prenom?.hasError('required')">Saisir un prénom</ng-container>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <label for="emailParent">E-mail<sup *ngIf="requiredChange">*</sup></label>
      <input
        type="email"
        [class.is-invalid]="email.invalid && (submitted$ | async)"
        formControlName="email"
        class="form-control"
        id="emailParent"
      />
      <div class="invalid-feedback" *ngIf="email?.errors && (submitted$ | async)">
        <ng-container *ngIf="email?.errors['required']"> Saisir une adresse émail</ng-container>
        <ng-container *ngIf="email?.errors['email']"> L'adresse émail est au mauvais format</ng-container>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <label for="telParent">Téléphone<sup *ngIf="requiredChange">*</sup></label>
      <input
        type="tel"
        formControlName="telephone"
        [class.is-invalid]="telephone.invalid && (submitted$ | async)"
        class="form-control"
        id="telParent"
      />
      <div class="invalid-feedback" *ngIf="telephone?.errors && (submitted$ | async)">
        <ng-container *ngIf="telephone?.errors['required']"> Saisir une numéro de téléphone</ng-container>
        <ng-container *ngIf="telephone?.errors['pattern']"> Le numéro de téléphone ne doit contenir que des chiffres</ng-container>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <label for="AdresseParent">Adresse<sup *ngIf="requiredChange">*</sup></label>
      <input
        type="text"
        class="form-control"
        id="AdresseParent"
        formControlName="adresse"
        [class.is-invalid]="adresse.invalid && (submitted$ | async)"
      />
      <div class="invalid-feedback" *ngIf="adresse?.hasError && (submitted$ | async)">
        <ng-container *ngIf="adresse?.hasError('required')">Saisir une adresse</ng-container>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <label for="cpParent">Code postal<sup *ngIf="requiredChange">*</sup></label>
      <input
        type="text"
        class="form-control"
        formControlName="codePostal"
        [class.is-invalid]="codePostal.invalid && (submitted$ | async)"
        id="cpParent"
      />
      <div class="invalid-feedback" *ngIf="codePostal?.hasError && (submitted$ | async)">
        <ng-container *ngIf="codePostal?.hasError('required')">Saisir un code postal</ng-container>
        <ng-container *ngIf="codePostal?.hasError('pattern') || codePostal?.hasError('minlength')"
          >Un code postal est composé de 5 chiffres</ng-container
        >
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <label for="villeParent">Ville<sup *ngIf="requiredChange">*</sup></label>
      <input
        type="text"
        class="form-control"
        formControlName="ville"
        [class.is-invalid]="ville.invalid && (submitted$ | async)"
        id="villeParent"
      />
      <div class="invalid-feedback" *ngIf="ville?.hasError && (submitted$ | async)">
        <ng-container *ngIf="ville?.hasError('required')">Saisir un ville</ng-container>
      </div>
    </div>
    <div class="col-md-6 mb-3">
      <label for="villeParent">Situation familiale<sup *ngIf="requiredChange">*</sup></label>
      <select
        class="form-select"
        formControlName="situationFamiliale"
        [class.is-invalid]="situationFamiliale.invalid && (submitted$ | async)"
      >
        <option selected value="null">Choisir une option</option>
        <option *ngFor="let situation of situationsFamiliales$ | async" [value]="situation.first">{{ situation.second }}</option>
      </select>
      <div class="invalid-feedback" *ngIf="situationFamiliale?.hasError && (submitted$ | async)">
        <ng-container *ngIf="situationFamiliale?.hasError('required')">Saisir une option</ng-container>
      </div>
    </div>
  </div>
</div>
